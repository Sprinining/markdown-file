# R102S接口协议

## 一、数据传输格式

- 数据结尾 \$
- 传输的数据格式： json + $
- 编码utf8

## 二、连接方式

1、串口连接

 根据串口地址（固定：/dev/ttyHS1）、波特率连接（默认：115200）、打开方式（固定：可读可写）

2、TCP/IP网口连接

根据IP、端口号（默认：20565）连接

## 三、通信接口

### 1000.*心跳包标识*

- send:

```json
{
  "code": 1000
}
```

- receive:

```json
{
  "code": 1000,
  "data": {
    "param": "Success"
  },
  "rtCode": 0
}
```

### 1001.标签上报事件标识

此方法由1018号指令触发，并不是给客户端直接调用的。客户端通过1018号指令配置参数开始寻卡，服务器通过1001号指令返回标签list。

- send:

```json

```

- receive:

```json
{
  "code": 1001,
  "data": [
    {
      "antId": 1,
      "bEpc": [
        68,
        68,
        102,
        102,
        -24,
        112,
        -38,
        -46,
        63,
        94,
        -7,
        -75
      ],
      "bRes": [
        34,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        -1
      ],
      "epc": "44446666E870DAD23F5EF9B5",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "2200",
      "result": 0,
      "rssi": -34,
      "tid": "e280",
      "userdata": "12ff"
    },
    {
      "antId": 1,
      "bEpc": [
        -86,
        -86,
        -69,
        -52,
        -1,
        -1,
        -1,
        -1,
        76,
        -68,
        93,
        116
      ],
      "bRes": [
        34,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        -1
      ],
      "epc": "AAAABBCCFFFFFFFF4CBC5D74",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "2200",
      "result": 0,
      "rssi": -43,
      "tid": "e280",
      "userdata": "12ff"
    },
    {
      "antId": 1,
      "bEpc": [
        -86,
        -86,
        51,
        51,
        -35,
        -39,
        1,
        64,
        0,
        0,
        0,
        115
      ],
      "bRes": [
        0,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        52
      ],
      "epc": "AAAA3333DDD9014000000073",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "0000",
      "result": 0,
      "rssi": -36,
      "tid": "e280",
      "userdata": "1234"
    }
  ],
  "rtCode": 0
}
```

### 1002.标签上报结束事件标识

由1011号指令触发

- send:

```json

```

- receive:

```json
{
  "code": 1002,
  "data": {},
  "rtCode": 0
}
```

### 1003.*信号输入触发上报事件标识*

- send:

```json

```

- receive:

```json

```

### 1004.*信号输入触发上报结束事件标识*

- send:

```json

```

- receive:

```json

```

### 1005.重启读写器标识

- send:

```json
{
  "code": 1005
}
```

- receive:

```json
{
  "code": 1005,
  "rtCode": 0
}
```

### 1006.*查询信号输入状态参数标识*

- send:

```json

```

- receive:

```json

```

### 1007.*配置信号输入触发参数标识*

- send:

```json

```

- receive:

```json

```

### 1008.*查询信号输入触发参数标识*

- send:

```json

```

- receive:

```json

```

### 1009.查询软件基带版本标识

- send:

```json
{
  "code": 1009
}
```

- receive:

```json
{
  "code": 1009,
  "data": {
    "baseVersions": "19080.4000.00.03.01.01\nSS.V0.05,19080.4000.00.03.01.01\nSS.V0.05, Linux version 4.9.217 (fengxiaodong@Android-05) (clang version 8.0.12 for Android NDK) #2 SMP PREEMPT Tue Nov 23 11:08:02 CST 2021\n",
    "deviceInfo": "RFID_READER_INFORMATION:, IP:, MASK:, GATEWAY:, MAC:64:f6:bb:79:9f:38, PORT:8088, HOST_SERVER_IP:, HOST_SERVER_PORT:, MODE:SERVER, NET_STATE:NORMAL, DHCP_SW:, MODEL:1"
  },
  "rtCode": 0
}
```

### 1010.查询读写器基本信息标识

- send:

```json
{
  "code": 1010
}
```

- receive:

```json
{
  "code": 1010,
  "data": {
    "appCompileTime": "Nov 29, 2021 2:26:14 PM",
    "appVersions": "1.0",
    "baseCompileTime": "Nov 23, 2021 5:08:02 PM",
    "powerOnTime": "Nov 23, 2021 12:35:37 PM",
    "readerSerialNumber": "",
    "systemVersions": "eng.fengxi.20211123.132305"
  },
  "rtCode": 0
}
```

### 1011.停止读写器RFID操作标识

- send:

```json
{
  "code": 1011
}
```

- receive:

```json
{
  "code": 1011,
  "data": {},
  "rtCode": 0
}
```

### 1012.配置读写器天线功率标识

- send:

```json
{
  "code": 1012,
  "data": {
    "dicPower": {
      "8": 20,
      "7": 20,
      "6": 20,
      "5": 20,
      "4": 20,
      "3": 20,
      "2": 20,
      "1": 20
    }
  }
}
```

- receive:

```json
{
  "code": 1012,
  "rtCode": 0
}
```

### 1013.查询读写器天线功率标识

- send:

```json
{
  "code": 1013
}
```

- receive:

```json
{
  "code": 1013,
  "data": {
    "dicPower": {
      "8": 20,
      "7": 20,
      "6": 20,
      "5": 20,
      "4": 20,
      "3": 20,
      "2": 20,
      "1": 20
    }
  },
  "rtCode": 0
}
```

### 1014.配置EPC基带参数标识

- send:

```json
{
  "code": 1014,
  "data": {
    "qValue": -1,
    "session": 1,
    "inventoryFlag": 1
  }
}
```

- receive:

```json
{
  "code": 1014,
  "rtCode": 0
}
```

### 1015.查询EPC基带参数标识

- send:

```json
{
  "code": 1015
}
```

- receive:

```json
{
  "code": 1015,
  "data": {
    "baseSpeed": 0.0,
    "inventoryFlag": 0,
    "qValue": -1,
    "session": 1
  },
  "rtCode": 0
}
```

### 1016.配置标签上传参数标识

- send:

```json
{
  "code": 1016,
  "data": {
    "repeatedTime": 400,
    "rssiTv": 0
  }
}
```

- receive:

```json
{
  "code": 1016,
  "rtCode": 0
}
```

### 1017.查询标签上传参数标识

- send:

```json
{
  "code": 1017
}
```

- receive:

```json
{
  "code": 1017,
  "data": {
    "repeatedTime": 300,
    "rssiTv": 0
  },
  "rtCode": 0
}
```

### 1018.读取EPC标签指令标识

- send:

```json
{
  "code": 1018,
  "data": {
    "antennaEnable": 1,
    "inventoryMode": 1
  }
}
```

```json
{
  "code": 1018,
  "data": {
    "antennaEnable": 1,
    "inventoryMode": 1,
    "filter": {
      "area": 1,
      "bitStart": 32,
      "bitLength": 0,
      "hexData": "",
      "bData": ""
    },
    "readUserdata": {
      "len": 1,
      "start": 0
    },
    "readTid": {
      "len": 1,
      "mode": 0
    },
    "readReserved": {
      "len": 1,
      "mode": 0
    },
    "hexPassword": "00000000"
  }
}
```

- receive:

```json
{
  "code": 1018,
  "rtCode": 0
}
```

### 1019.写EPC标签标识

- send:

```json
{
  "code": 1019,
  "data": {
    "antennaEnable": 1,
    "area": 1,
    "start": 3,
    "hexWriteData": "BBCC",
    "bwriteData": "",
    "filter": {
      "area": 1,
      "bitStart": 32,
      "bitLength": 0,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "bData": ""
    },
    "hexPassword": "00000000"
  }
}
```

- receive:

```json
{
  "code": 1019,
  "rtCode": 0
}
```

### 1020.锁EPC标签标识

- send:

```json
{
  "code": 1020,
  "data": {
    "antennaEnable": 1,
    "area": 1,
    "mode" : 1,
    "filter": {
      "area": 1,
      "bitStart": 32,
      "bitLength": 0,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "bData": ""
    },
    "hexPassword": "88888888"
  }
}
```

- receive:

```json
{
  "code": 1020,
  "rtCode": 0
}
```

### 1021.销毁EPC标签标识

- send:

```json
{
  "code": 1021,
  "data": {
    "antennaEnable": 1,
    "filter": {
      "area": 1,
      "bitStart": 32,
      "bitLength": 0,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "bData": ""
    },
    "hexPassword": "88888888"
  }
}
```

- receive:

```json
{
  "code": 1021,
  "rtCode": 0
}
```

### 1022.配置RFID工作频段标识

- send:

```json
{
  "code": 1022,
  "data": {
    "freqRangeIndex": "Chinese band1"
  }
}
```

- receive:

```json
{
  "code": 1022,
  "rtCode": 0
}
```

### 1023.查询RFID工作频段标识

- send:

```json
{
  "code": 1023
}
```

- receive:

```json
{
  "code": 1023,
  "data": {
    "freqRangeIndex": "Chinese band1"
  },
  "rtCode": 0
}
```

### 1024.读写器设置时间同步

- send:

```json
{
  "code": 1024,
  "data": "1483159625851",
  "rtCode": 0,
  "rtMsg": ""
}
```

- receive:

```json
{
  "code": 1024,
  "rtCode": 0
}
```

### 1025.读写器报警

- send:

```json

```

- receive:

```json

```

### 1026.读写器下载

- send:

```json

```

- receive:

```json

```

### 1027.获取跳频表

- send:

```json
{
  "code": 1027
}
```

- receive:

```json
{
  "code": 1027,
  "data": {
    "maxFrequencyIndex": 50,
    "minFrequencyIndex": 0
  },
  "rtCode": 0
}
```

### 1028.设置跳频表

- send:

```json
{
  "code": 1028,
  "data":{
    "minFrequencyIndex": 0,
    "maxFrequencyIndex": 49
  }
}
```

- receive:

```json
{
  "code": 1028,
  "rtCode": 0
}
```

### 1029.获取ip

- send:

```json
{
  "code": 1029
}
```

- receive:

```json
{
  "code": 1029,
  "data": "[\"fe80::20a:f5ff:fe4e:a4a0\"]",
  "rtCode": 0
}
```

### 1030.设置ipv4

- send:

```json
{
  "code": 1030,
  "data": {
    "mode": "STATIC",
    "ipAddress": "192.168.40.219",
    "netmask": "255.255.255.0",
    "gateway": "192.168.40.1",
    "dns1": "",
    "dns2": ""
  }
}
```

- receive:

```json
{
  "code": 1030,
  "rtCode": -1,
  "rtMsg": "设置ipv4失败"
}
```

### 1031.设置ipv6

- send:

```json
{
  "code": 1031,
  "data":"fe80::cda0:ef9d:bad9:54ff/64"
}
```

- receive:

```json
{
  "code": 1031,
  "rtCode": 0
}
```

