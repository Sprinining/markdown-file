# R102S接口协议

## 一、数据传输格式

- 数据结尾 \$
- 传输的数据格式： json + $
- json格式（编码utf8）：

```json
{
	"code": 1011,
	"data": {},
	"rtCode": 0,
	"rtMsg": "错误信息"
}
```

## 二、连接方式

1、串口连接

 根据串口地址（固定：/dev/ttyHS1）、波特率连接（默认：115200）、打开方式（固定：可读可写）

2、TCP/IP网口连接

根据IP、端口号（默认：8088）连接

## 三、通信接口

### 1000.心跳包标识

- 客户端可以主动发送该指令，收到返回的心跳包；或者，客户端10秒未发送指令，服务器每隔10秒发送一次心跳。

- send

```json
{
  "code": 1000
}
```

- receive

```json
{
  "code": 1000,
  "data": {
    "param": "Success"
  },
  "rtCode": 0
}
```

### 1001.标签上报事件标识

- LogBaseEpcInfo

```java
public class LogBaseEpcInfo {
    // 16 进制 EPC 字符串
    private String epc;
    // EPC 字节数组
    private byte[] bEpc;
    // PC 值
    private String pc;
    // 天线编号
    private int antId;
    // 信号强度
    private int rssi;
    // 标签读取结果，0 为读取成功，非 0 为失败
    private int result;
    // 16 进制 TID 字符串
    private String tid;
    // TID 字节数组
    private byte[] bTid;
    // 16 进制 Userdata 字符串
    private String userdata;
    // Userdata 字节数组
    private byte[] bUser;
    // 16 进制保留区字符串
    private String reserved;
    // 保留区字节数组
    private byte[] bRes;
    // 读取标签时间
    private Date readTime;
     // 附加数据
    private String additionData;
    private byte[] additionDataBytes;
}

```

- 此方法由1018号指令触发，并不是给客户端直接调用的。客户端通过1018号指令配置参数开始寻卡，服务器通过1001号指令返回标签list。

- receive

```json
{
  "code": 1001,
  "data": [
    {
      "antId": 1,
      "bEpc": [
        68,
        68,
        102,
        102,
        -24,
        112,
        -38,
        -46,
        63,
        94,
        -7,
        -75
      ],
      "bRes": [
        34,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        -1
      ],
      "epc": "44446666E870DAD23F5EF9B5",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "2200",
      "result": 0,
      "rssi": -34,
      "tid": "e280",
      "userdata": "12ff"
    },
    {
      "antId": 1,
      "bEpc": [
        -86,
        -86,
        -69,
        -52,
        -1,
        -1,
        -1,
        -1,
        76,
        -68,
        93,
        116
      ],
      "bRes": [
        34,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        -1
      ],
      "epc": "AAAABBCCFFFFFFFF4CBC5D74",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "2200",
      "result": 0,
      "rssi": -43,
      "tid": "e280",
      "userdata": "12ff"
    },
    {
      "antId": 1,
      "bEpc": [
        -86,
        -86,
        51,
        51,
        -35,
        -39,
        1,
        64,
        0,
        0,
        0,
        115
      ],
      "bRes": [
        0,
        0
      ],
      "bTid": [
        -30,
        -128
      ],
      "bUser": [
        18,
        52
      ],
      "epc": "AAAA3333DDD9014000000073",
      "pc": "3400",
      "readTime": "Nov 23, 2021 4:32:43 PM",
      "reserved": "0000",
      "result": 0,
      "rssi": -36,
      "tid": "e280",
      "userdata": "1234"
    }
  ],
  "rtCode": 0
}
```

### 1002.标签上报结束事件标识

- 由1011号指令触发

- receive

```json
{
  "code": 1002,
  "data": {},
  "rtCode": 0
}
```

### 1003.*信号输入触发上报事件标识*

- send

```json

```

- receive

```json

```

### 1004.*信号输入触发上报结束事件标识*

- send

```json

```

- receive

```json

```

### 1005.重启读写器标识

- send

```json
{
  "code": 1005
}
```

- receive

```json
{
  "code": 1005,
  "rtCode": 0
}
```

### 1006.*查询信号输入状态参数标识*

- send

```json

```

- receive

```json

```

### 1007.*配置信号输入触发参数标识*

- send

```json

```

- receive

```json

```

### 1008.*查询信号输入触发参数标识*

- send

```json

```

- receive

```json

```

### 1009.查询软件基带版本标识

```java
public class MsgAppGetBaseVersion {
    // 基带版本
    private String baseVersions;
    // 设备相关信息
    private String deviceInfo;
} 
```

- send

```json
{
  "code": 1009
}
```

- receive

```json
{
  "code": 1009,
  "data": {
    "baseVersions": "19080.4000.00.03.01.01\nSS.V0.05,19080.4000.00.03.01.01\nSS.V0.05, Linux version 4.9.217 (fengxiaodong@Android-05) (clang version 8.0.12 for Android NDK) #2 SMP PREEMPT Tue Nov 23 11:08:02 CST 2021\n",
    "deviceInfo": "RFID_READER_INFORMATION:, IP:, MASK:, GATEWAY:, MAC:64:f6:bb:79:9f:38, PORT:8088, HOST_SERVER_IP:, HOST_SERVER_PORT:, MODE:SERVER, NET_STATE:NORMAL, DHCP_SW:, MODEL:1"
  },
  "rtCode": 0
}
```

### 1010.查询读写器基本信息标识

```java
public class MsgAppGetReaderInfo {
    // 读写器序列号
    private String readerSerialNumber;
    // 上电时间
    private Date powerOnTime;
    // 基带编译时间
    private Date baseCompileTime;
    // 应用软件版本（如：“0.1.0.0”）
    private String appVersions;
    // 应用编译时间
    private Date appCompileTime;
    // 操作系统版本
    private String systemVersions;
}
```

- send

```json
{
  "code": 1010
}
```

- receive

```json
{
  "code": 1010,
  "data": {
    "appCompileTime": "Nov 29, 2021 2:26:14 PM",
    "appVersions": "1.0",
    "baseCompileTime": "Nov 23, 2021 5:08:02 PM",
    "powerOnTime": "Nov 23, 2021 12:35:37 PM",
    "readerSerialNumber": "",
    "systemVersions": "eng.fengxi.20211123.132305"
  },
  "rtCode": 0
}
```

### 1011.停止寻卡

- send

```json
{
  "code": 1011
}
```

- receive

```json
{
  "code": 1011,
  "rtCode": 0
}
```

### 1012.配置读写器天线功率标识

```java
public class MsgBaseSetPower {
    // 读写器对应天线功率(key：天线索引号，value：天线功率值)
    private Hashtable<Integer, Integer> dicPower;
}
```

- send

```json
{
  "code": 1012,
  "data": {
    "dicPower": {
      "8": 20,
      "7": 20,
      "6": 20,
      "5": 20,
      "4": 20,
      "3": 20,
      "2": 20,
      "1": 20
    }
  }
}
```

- receive

```json
{
  "code": 1012,
  "rtCode": 0
}
```

### 1013.查询读写器天线功率标识

```java
public class MsgBaseGetPower {
    // 读写器对应天线功率(key：天线索引号，value：天线功率值)
    private Hashtable<Integer, Integer> dicPower;
}
```

- send

```json
{
  "code": 1013
}
```

- receive

```json
{
  "code": 1013,
  "data": {
    "dicPower": {
      "8": 20,
      "7": 20,
      "6": 20,
      "5": 20,
      "4": 20,
      "3": 20,
      "2": 20,
      "1": 20
    }
  },
  "rtCode": 0
}
```

### 1014.配置EPC基带参数标识

```java
public class MsgBaseSetBaseband {
    // EPC 基带速率（可选）
    private double baseSpeed;
    // 默认 Q 值（可选）(0~15)
    private int qValue;
    //（可选）(0,Session0; 1,Session1; 2,Session2; 3,Session3)
    private int session;
    // 盘存标志参数（可选）(0,仅用 Flag A 盘存;1,仅用 Flag B 盘存;2,轮流使用 Flag A 和 Flag B)
    private int inventoryFlag;
}
```

- send

```json
{
  "code": 1014,
  "data": {
    "qValue": -1,
    "session": 1,
    "inventoryFlag": 1
  }
}
```

- receive

```json
{
  "code": 1014,
  "rtCode": 0
}
```

### 1015.查询EPC基带参数标识

```java
public class MsgBaseGetBaseband  {
    // EPC 基带速率（可选）
    private double baseSpeed;
    // 默认 Q 值（可选）(0~15)
    private int qValue;
    //（可选）(0,session0; 1,session1; 2,session2; 3,session3)
    private int session;
    // 盘存标志参数（可选）(0,仅用 Flag A 盘存;1,仅用 Flag B 盘存;2,轮流使用 Flag A 和 Flag B)
    private int inventoryFlag;
}
```

- send

```json
{
  "code": 1015
}
```

- receive

```json
{
  "code": 1015,
  "data": {
    "baseSpeed": 0.0,
    "inventoryFlag": 0,
    "qValue": -1,
    "session": 1
  },
  "rtCode": 0
}
```

### 1016.配置标签上传参数标识

```java
public class MsgBaseSetTagLog {
    // 重复标签过滤时间（可选）（表示在一个读卡指令执行周期内，在指定的重复过滤时间内相同的标签内容只上传一次，0~65535，时间单位：10ms）。
    private int repeatedTime;
    // RSSI 阈值（可选）（标签 RSSI 值低于阈值时标签数据将不上传并丢弃）
    private int rssiTv;
}
```

- send

```json
{
  "code": 1016,
  "data": {
    "repeatedTime": 400,
    "rssiTv": 0
  }
}
```

- receive

```json
{
  "code": 1016,
  "rtCode": 0
}
```

### 1017.查询标签上传参数标识

```java
public class MsgBaseGetTagLog {
    // 重复标签过滤时间（可选）（表示在一个读卡指令执行周期内，在指定 的重复过滤时间内相同的标签内容只上传一次，0~65535，时间单位：10ms）。
    private int repeatedTime;
    // RSSI 阈值（可选）（标签 RSSI 值低于阈值时标签数据将不上传并丢弃）
    private int rssiTv;
}
```

- send

```json
{
  "code": 1017
}
```

- receive

```json
{
  "code": 1017,
  "data": {
    "repeatedTime": 300,
    "rssiTv": 0
  },
  "rtCode": 0
}
```

### 1018.寻卡

```java
public class MsgBaseInventoryEpc {
    // 天线端口，天线是否启用的byte值，1为启用，0为不启用，int从右到左的八位对应天线从一到八，如0b00000111表示启用第1,2,3根天线
    private int antennaEnable;
    // 连续/单次读取 (0: 单次读取模式，读写器尽在各个使能的天线上进行一轮读卡操作便结束读卡操作并自动进入空闲状态; 1: 连续读取模式，读写器一直进行读卡操作直到读写器收到停止指令后结束读卡)
    private int inventoryMode;
    // 选择读取参数（可选）
    private ParamEpcFilter filter;
    // TID 读取参数（可选）
    private ParamEpcReadTid readTid;
    // 用户数据区读取参数（可选）
    private ParamEpcReadUserdata readUserdata;
    // 保留区读取参数（可选）（详见参数说明）
    private ReadReserved readReserved;
    // 访问密码（可选）
    private String hexPassword;

    public static class ParamEpcFilter {
    	// 要匹配的数据区(1，EPC 区；2，TID 区；3，用户数据区)
    	private int bank;
    	// 匹配数据起始位地址
    	private int bitStart;
    	// 需要匹配的数据内容(16进制 )
    	private String hexData;
    	// 是否匹配
    	private boolean suit;
    	// 是否启用
    	private boolean enable;
    }

    public static class ParamEpcReadTid {
        // TID 读取模式配置，(0，TID 读取长度自适应，但最大长度不超过字节 1 定义的长度；1，按照字节 1 定义的长度读取 TID)
        private int mode;
        // 读写器需要读取 TID 数据的字(word，16bits，下同)长度
        private int len;
    }

    public static class ParamEpcReadUserdata {
        // 起始字地址
        private int start;
        // 读写器需要读取的用户数据的字长度
        private int len;
    }

    public static class ReadReserved {
        // 保留区读取参数 读取模式配置
        private int mode;
        // 读写器需要读取  数据的字(word，16bits，下同)长度
        private int len;
    }
}
```

- send

```json
{
  "code": 1018,
  "data": {
    "antennaEnable": 1,
    "inventoryMode": 1
  }
}
```

```json
{
  "code": 1018,
  "data": {
    "antennaEnable": 1,
    "inventoryMode": 1,
	"filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "",
      "suit": true,
      "enable": true
    },
    "readUserdata": {
      "len": 1,
      "start": 0
    },
    "readTid": {
      "len": 1,
      "mode": 0
    },
    "readReserved": {
      "len": 1,
      "mode": 0
    },
    "hexPassword": "00000000"
  }
}
```

- receive

```json
{
  "code": 1018,
  "rtCode": 0
}
```

### 1019.写卡

```java
public class MsgBaseWriteEpc {
    // 天线端口，天线是否启用的byte值，1为启用，0为不启用，int从右到左的八位对应天线从一到八，如0b00000111表示启用第1,2,3根天线
    private int antennaEnable;
    // 待写入的标签数据区(0，保留区；1，EPC 区；2，TID 区；3，用户数据区)
    private int area;
    // 待写入标签数据区的字起始地址
    private int start;
    // 待写入的数据内容(16进制)
    private String hexWriteData;
    // 待写入的数据内容(弃用)
    private String bwriteData;
    // 选择读取参数（可选）
    private ParamEpcFilter filter;
    // 访问密码
    private String hexPassword;
}
```

- send

```json
{
  "code": 1019,
  "data": {
    "antennaEnable": 1,
    "area": 1,
    "start": 3,
    "hexWriteData": "BBCC",
    "bwriteData": "",
    "filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "suit": true,
      "enable": true
    },
    "hexPassword": "00000000"
  }
}
```

- receive

```json
{
  "code": 1019,
  "rtCode": 0
}
```

### 1020.锁卡

- 保留区前两个字是销毁密码，后两个字是访问密码
- 锁卡前要先修改访问密码（不能为00000000）

- 锁定保留区时，读写都需要使用修改后的密码
- 锁定其他三个区时，可以用00000000去读，但是如果要写（TID区不可写），必须用修改后的密码

```java
public class MsgBaseLockEpc  {
    // 天线端口
    private int antennaEnable;
    // 待锁定的标签数据区(0，保留区；1，EPC 区；2，TID 区；3， 用户数据区)
    private int area;
    // 锁操作类型(0，解锁；1，锁定；2，永久锁定)
    private int mode;
    // 选择读取参数（可选）
    private ParamEpcFilter filter;
    // 访问密码
    private String hexPassword;
}
```

- send

```json
{
  "code": 1020,
  "data": {
    "antennaEnable": 1,
    "area": 1,
    "mode" : 1,
    "filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "suit": true,
      "enable": true
    },
    "hexPassword": "88888888"
  }
}
```

- receive

```json
{
  "code": 1020,
  "rtCode": 0
}
```

### 1021.销卡

```java
public class MsgBaseDestoryEpc {
    // 天线端口
    private int antennaEnable;
    // 销毁密码
    private String hexPassword;
    // 选择读取参数（可选）
    private ParamEpcFilter filter;
}
```

- send

```json
{
  "code": 1021,
  "data": {
    "antennaEnable": 1,
    "filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "AAAAFFFAFFFFFFFF4CBC5D74",
      "suit": true,
      "enable": true
    },
    "hexPassword": "88888888"
  }
}
```

- receive

```json
{
  "code": 1021,
  "rtCode": 0
}
```

### 1022.配置RFID工作频段标识

```java
public class MsgBaseSetFreqRange {
    // 频段索引
    private String freqRangeIndex;
}
```

- send

```json
{
  "code": 1022,
  "data": {
    "freqRangeIndex": "Chinese band1"
  }
}
```

- receive

```json
{
  "code": 1022,
  "rtCode": 0
}
```

### 1023.查询RFID工作频段标识

```java
public class MsgBaseGetFreqRange {
    // 频段索引
    private String freqRangeIndex;
}
```

- send

```json
{
  "code": 1023
}
```

- receive

```json
{
  "code": 1023,
  "data": {
    "freqRangeIndex": "Chinese band1"
  },
  "rtCode": 0
}
```

### 1024.读写器设置时间同步

- data为表示时间的long值

- send

```json
{
  "code": 1024,
  "data": "1483159625851",
  "rtCode": 0,
  "rtMsg": ""
}
```

- receive

```json
{
  "code": 1024,
  "rtCode": 0
}
```

### 1025.读写器报警

蜂鸣器周期性的响，关闭寻卡或者没有socket连接时也会停止

- send

```json
{
  "code": 1024,
  "data": true
}
```

- receive

```json
{
  "code": 1025,
  "rtCode": 0
}
```

### 1026.读写器下载

```java
public class MsgDownLoadApp {
    // http://服务器地址：服务端口
    // 例: http://192.168.80.100:8080
    private String address;
    // apk文件的相对路径
    // 例：/opt/gateway/yw/app-release.apk
    private String url;
}
```

- send

```json
{
	"code": 1026,
	"data": {
		"address": "http://192.168.80.100:8080",
		"url": "/opt/gateway/yw/app-release.apk"
	}
}
```

- receive

```json
{
	"code": 1026,
	"rtCode": 0
}
```

### 1027.获取跳频表

```java
public class MsgFrequencyHopTable {
    // 最小频点的下标
    int minFrequencyIndex;
    // 最大频点的下标
    int maxFrequencyIndex;
}
```

```kotlin
// 频点数组
private val originalHopTable = intArrayOf(
    902750, 903250, 903750, 904250, 904750, 905250, 905750, 906250, 906750, 907250,
    907750, 908250, 908750, 909250, 909750, 910250, 910750, 911250, 911750, 912250,
    912750, 913250, 913750, 914250, 914750, 915250, 915750, 916250, 916750, 917250,
    917750, 918250, 918750, 919250, 919750, 920250, 920750, 921250, 921750, 922250,
    922750, 923250, 923750, 924250, 924750, 925250, 925750, 926250, 926750, 927250
)
```

- send

```json
{
  "code": 1027
}
```

- receive

```json
{
  "code": 1027,
  "data": {
    "maxFrequencyIndex": 50,
    "minFrequencyIndex": 0
  },
  "rtCode": 0
}
```

### 1028.设置跳频表

```java
public class MsgFrequencyHopTable {
    // 最小频点的下标
    int minFrequencyIndex;
    // 最大频点的下标
    int maxFrequencyIndex;
}
```

- send

```json
{
  "code": 1028,
  "data":{
    "minFrequencyIndex": 0,
    "maxFrequencyIndex": 49
  }
}
```

- receive

```json
{
  "code": 1028,
  "rtCode": 0
}
```

### 1029.获取ip

- send

```json
{
  "code": 1029
}
```

- receive

```json
{
  "code": 1029,
  "data": {
    "dNS": [
      "218.2.135.1",
      "114.114.114.114"
    ],
    "gATEWAY": "192.168.40.1",
    "iP": [
      "192.168.40.114",
      "fe80::66f6:bbff:fe8a:db33"
    ],
    "mAC": "64:f6:bb:8a:db:33",
    "nETMASK": "255.255.255.0",
    "networkType": "NETWORK_WIFI",
    "tcpPort": 8088
  },
  "rtCode": 0
}
```

### 1030.设置ipv4

- 设置后设备会自动重启
- 设置DHCP时，只需传mode为“DHCP”，其他都为“”

```java
public class MsgSetIPv4 {
    // STATIC DHCP UNASSIGNED
    String mode;
    String ipAddress;
    String netmask;
    String gateway;
    String dns1;
    String dns2;
}
```

- send

```json
{
  "code": 1030,
  "data": {
    "mode": "STATIC",
    "ipAddress": "192.168.40.219",
    "netmask": "255.255.255.0",
    "gateway": "192.168.40.1",
    "dns1": "",
    "dns2": ""
  }
}
```

- receive

```json
{
  "code": 1030,
  "rtCode": -1,
  "rtMsg": "设置ipv4失败"
}
```

### 1031.设置ipv6

- 设置后设备会自动重启

- send

```json
{
  "code": 1031,
  "data":"fe80::cda0:ef9d:bad9:54ff/64"
}
```

- receive

```json
{
  "code": 1031,
  "rtCode": 0
}
```

### 2000.一键获取

```java
public class MsgAllParameters {
    // 读写器版本号
    private ReadVersion readVersion;
    // 频段
    private String region;
    // 功率
    private ArrayList<AntennaPower> antennaPowers;
    // session
    private int session;
    // profile 1~4
    private int profile;
    // target
    private int target;
    // Q值
    private int qValue;
    // 是否天线检测
    private int checkAntenna;
    // 附加数据
    private AdditionalData additionalData;
    // 获取gpi
    private int[] gpi;
    // 设置gpo
    private ArrayList<Gpo> gpoArrayList;
    // 获取指定盘点天线配置
    private ConnectedAntennas connectedAntennas;
    // 获取温度
    private int temperature;
    // 设置过滤
    private ParamEpcFilter filter;
    // 网络
    private NetworkStateBean networkStateBean;

    public static class ReadVersion {
        // 版本号
        private String bootver;
        // 版本信息
        private String firmdata;
        // 软件版本
        private String firmver;
        // 硬件版本
        private String hardver;
    }

    public static class Gpo {
        // 1~4
        private int gpoId;
        // 1为高电平，0为低电平
        private int gpo;
    }

    public static class AdditionalData {
        private int bank;
        private String startAddress;
        private String byteCount;
        private String password;
    }

 	public static class ParamEpcFilter {
    	// 要匹配的数据区(1，EPC 区；2，TID 区；3，用户数据区)
    	private int bank;
    	// 匹配数据起始位地址
    	private int bitStart;
    	// 需要匹配的数据内容(16进制 )
    	private String hexData;
    	// 是否匹配
    	private boolean suit;
    	// 是否启用
    	private boolean enable;
    }

    public static class ConnectedAntennas {
        // 连接上的天线的数量
        private int antennaCount;
        // 连接上的天线id数组
        private int[] antennas;
    }

    public static class AntennaPower {
        private int antennaId;
        private short readPower;
        private short writePower;
    }
}
```

- send

```json
{
  "code": 2000
}
```

- reveive

```json
{
  "code": 2000,
  "data": {
    "antennaPowers": [
      {
        "antennaId": 1,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 2,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 3,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 4,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 5,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 6,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 7,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 8,
        "readPower": 3000,
        "writePower": 3000
      }
    ],
    "checkAntenna": 1,
    "connectedAntennas": {
      "antennaCount": 1,
      "antennas": [
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]
    },
    "filter": {
      "bank": 0,
      "bitStart": 0,
      "enable": false,
      "hexData": "",
      "suit": true
    },
    "gpi": [
      1,
      1,
      112,
      112
    ],
    "networkStateBean": {
      "dNS": [
        "218.2.135.1",
        "114.114.114.114"
      ],
      "gATEWAY": "192.168.40.1",
      "iP": [
        "192.168.40.114",
        "fe80::66f6:bbff:fe8a:db33"
      ],
      "mAC": "64:f6:bb:8a:db:33",
      "nETMASK": "255.255.255.0",
      "networkType": "NETWORK_WIFI",
      "tcpPort": 8088
    },
    "profile": 1,
    "qValue": -1,
    "readVersion": {
      "bootver": "15.01.04.00",
      "firmdata": "20.20.07.29",
      "firmver": "20.07.29.00",
      "hardver": "A1.00.02.01"
    },
    "region": "RG_NA",
    "session": 0,
    "target": 0,
    "temperature": 31
  },
  "rtCode": 0,
  "rtMsg": "附加数据为空0 "
}
```

### 2001.一键设置

- 所有参数都为可选参数
- 设置频段可以传字符串或者对应的int值的字符串
- 附加数据不启用时，只需设置`"byteCount": "0"`，bank，startAddress，password随意
- 附加数据设置byteCount为奇数时，实际返回奇数-1个字节

```java
switch (allParameters.getRegion()) {
    case "RG_NONE":
    case "0":
        region = 0;
        break;
    case "RG_NA":
    case "1":
        region = 1;
        break;
    case "RG_EU":
    case "2":
        region = 2;
        break;
    case "RG_KR":
    case "3":
        region = 3;
        break;
    case "RG_PRC":
    case "6":
        region = 6;
        break;
    case "RG_EU2":
    case "7":
        region = 7;
        break;
    case "RG_EU3":
    case "8":
        region = 8;
        break;
    case "RG_PRC2":
    case "10":
        region = 10;
        break;
    case "RG_OPEN":
    case "255":
        region = 255;
        break;
    default:
        region = 0;
        rtMsg.append("频段参数错误");
}
```

- send

```json
{
  "code": 2001,
  "data": {
    "antennaPowers": [
      {
        "antennaId": 1,
        "readPower": 2000,
        "writePower": 3000
      },
      {
        "antennaId": 2,
        "readPower": 2000,
        "writePower": 3000
      },
      {
        "antennaId": 3,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 4,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 5,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 6,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 7,
        "readPower": 3000,
        "writePower": 3000
      },
      {
        "antennaId": 8,
        "readPower": 3000,
        "writePower": 3000
      }
    ],
    "checkAntenna": 1,
    "profile": 2,
    "qValue": -1,
    "region": "RG_NA",
    "session": 0,
    "target": 0,
    "additionalData": {
      "bank": 3,
      "startAddress": "0",
      "byteCount": "2",
      "password": "00000000"
    },
    "gpoArrayList": [
      {
        "gpoId": 1,
        "gpo": 1
      },
      {
        "gpoId": 2,
        "gpo": 1
      },
      {
        "gpoId": 3,
        "gpo": 1
      },
      {
        "gpoId": 4,
        "gpo": 1
      }
    ],
    "filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "777766662F0135065C644CF0",
      "suit": true,
      "enable": true
    }
  }
}
```

- receive

```json
{
  "code": 2001,
  "rtCode": 0,
  "rtMsg": ""
}
```

### 2002.恢复出厂

- send

```json
{
  "code": 2002
}
```

- reveive

```json
{
  "code": 2002,
  "rtCode": 0,
  "rtMsg": "恢复出厂参数 session:0 profile:0 target:0 q:-1附加数据:[startAddress:32 byteCount:16 bank:3 password:00000000]"
}
```

### 2003.获取自动模式参数

```java
public class AutoModeBean {
    // 自动模式 0连续 1触发
    private int autoMode;
    // PC服务IP地址
    private String ip;
    // 输出模式  0串口 1socket
    private int output;
    // PC服务端口
    private String port;
    // 触发方式 0低电平 1高电平
    private int trigger;
    // 触发的电平id
    private int gpiId;
}
```

- send

```json
{
  "code": 2003
}
```

- reveive

```json
{
  "code": 2003,
  "data": {
    "autoMode": 0,
    "ip": "192.168.1.1",
    "output": 0,
    "port": "8080",
    "trigger": 0,
    "gpiId": 1
  }
}
```

### 2004.设置自动模式参数

- send

```json
{
  "code": 2004,
  "data": {
    "autoMode": 0,
    "ip": "192.168.1.1",
    "output": 0,
    "port": "9999",
    "trigger": 0,
    "gpiId": 1
  }
}
```

- reveive

```json
{
  "code": 2004,
  "rtCode": 0
}
```

### 2005.自动模式开始

- send

```json
{
  "code": 2005,
  "data": {
    "antennaEnable": 1
  }
}
```

- reveive

```json
{
  "code": 2005,
  "rtCode": 0
}
```

### 2006.自动模式结束

- send

```json
{
  "code": 2006
}
```

- reveive

```json
{
  "code": 2006,
  "rtCode": 0
}
```

### 2007.设置不启用过滤

- send：

```json
{
  "code": 2007
}
```

- receive：

```json
{
  "code": 2007,
  "rtCode": 0
}
```

### 2008.读卡

```java
public class MsgReadTag {
    // 天线端口
    private int antennaEnable;
    // 区(0，保留区；1，EPC 区；2，TID 区；3，用户数据区)
    private int bank;
    // 块数（一块一个字，32位）
    private int blockCount;
    // 起始地址（字为单位）
    private int startAddress;
    // 访问密码
    private String hexPassword;
    // 过滤（可选）
    private ParamEpcFilter filter;
    
    public static class ParamEpcFilter {
   		// 要匹配的数据区(1，EPC 区；2，TID 区；3，用户数据区)
    	private int bank;
    	// 匹配数据起始位地址
    	private int bitStart;
    	// 需要匹配的数据内容(16进制 )
    	private String hexData;
    	// 是否匹配
    	private boolean suit;
    	// 是否启用
    	private boolean enable;
    }
}
```

- send：

```json
{
  "code": 2008,
  "data": {
    "antennaEnable": 1,
    "bank": 1,
    "blockCount": 6,
    "startAddress": 2,
    "hexPassword": "00000000",
    "filter": {
      "bank": 1,
      "bitStart": 32,
      "hexData": "777766662F0135065C644CF0",
      "suit": true,
      "enable": true
    }
  }
}
```

- receive：

```json
{
  "code": 2008,
  "data": "777766662F0135065C644CF0",
  "rtCode": 0
}
```

### 2009.设置ip

```java
public class MsgSetIP {
    private String mode;
    private String ipv4Address;
    private String netmask;
    private String gateway;
    private String dns1;
    private String dns2;
    private String ipv6Address;
}
```

- send

```json
{
  "code": 2009,
  "data": {
    "mode": "STATIC",
    "ipv4Address": "192.168.40.219",
    "netmask": "255.255.255.0",
    "gateway": "192.168.40.1",
    "dns1": "",
    "dns2": "",
    "ipv6Address": "fe80::cda0:ef9d:bad9:54ff/64"
  }
}
```

- receive

```JSON
{
  "code": 2009,
  "rtCode": 0
}
```

